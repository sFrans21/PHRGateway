@model IEnumerable<WebSystem.Models.VwVehicleList_UserSum>

@{
    ViewData["Title"] = "Index";
}

<link href="~/bootstrap-datepicker/css/bootstrap-datepicker.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.datatables.net/fixedcolumns/4.2.1/css/fixedColumns.dataTables.min.css" />
<style>
    table.dataTable thead > tr > th {
        text-align: center;
        vertical-align: middle;
        background-color: white;
    }

    table.dataTable tbody tr > .dtfc-fixed-left, table.dataTable tbody tr > .dtfc-fixed-right {
        z-index: 0;
        background-color: white;
    }

    table.dataTable thead tr > .dtfc-fixed-left, table.dataTable thead tr > .dtfc-fixed-right, table.dataTable tfoot tr > .dtfc-fixed-left, table.dataTable tfoot tr.odd > .dtfc-fixed-right {
        background-color: white;
    }

    table.dataTable tbody tr.odd > .dtfc-fixed-right {
        z-index: 0;
        background-color: #eaeaea;
    }

    .btn-light {
        color: #212529;
        background-color: transparent !important;
        border-color: transparent !important;
    }

    table.dataTable tbody th, table.dataTable tbody td {
        padding: 1px !important;
        text-align: center;
    }

    dataTables_scroll {
        font-size: 9pt !important;
    }

    .table-striped tbody tr:nth-of-type(odd) {
        background-color: #eaeaea;
    }

    .table-striped tbody tr:nth-of-type(even) {
        background-color: #ffff;
    }
</style>

<partial name="_HomeButton" />

<div class="d-flex justify-content-center pt-2">
    <div class="card text-white bg-danger" style="width: 12rem;">
        <div class="card-body text-center" style="padding: 0.25rem;">
            @*<a class="card-text"><i class="fa fa-calendar" asp-controller="Periode" asp-action="Index"></i> @ViewBag.periodedetail</a>*@
            <a class="btn text-white" asp-controller="Periode" asp-action="Index" title="Ke Halaman Periode"><i class="fa fa-calendar"></i> @ViewBag.periodedetail</a>
        </div>
    </div>
</div>

<div class="text-center" style="padding-top:15px;">
    @*<h2>Hai, @ViewBag.Displayname</h2>*@
    <h3>Hitung emisi karbon kendaraan kamu</h3>
</div>

<nav>
    <div class="nav nav-tabs nav-pills nav-justified flex-sm-row" id="nav-tab" role="tablist">
        @*<a class="nav-item nav-link" id="nav-rumah-tab" data-toggle="tab" href="/HouseHold/" role="tab" aria-controls="nav-rumah" aria-selected="true" idSpan="1" spanName="karbon di tempat tinggal"><i class="fa fa-house"></i> Rumah</a>*@
        @*<a class="nav-item nav-link active" id="nav-kendaraan-tab" data-toggle="tab" href="#nav-kendaraan" role="tab" aria-controls="nav-kendaraan" aria-selected="false" idSpan="1" spanName="karbon kendaraan"><i class="fa fa-car"></i> Kendaraan</a>
        <a class="nav-item nav-link" id="nav-serapan-tab" data-toggle="tab" href="#nav-serapan" role="tab" aria-controls="nav-serapan" aria-selected="false" idSpan="1" spanName="serapan karbon"><i class="fa fa-tree"></i> Serapan Karbon</a>*@
        @*<a class="nav-item nav-link" id="nav-certificate-tab" data-toggle="tab" href="#nav-certificate" role="tab" aria-controls="nav-certificate" aria-selected="false" idSpan="1" spanName="certificate"><i class="fa fa-book"></i> Sertifikat</a>*@
        <a class="nav-item nav-link" asp-controller="Household" asp-action="Index"><img src="/assets/img/home_nav.png" style="width:25px;" /> Tempat Tinggal</a>
        <a class="nav-item nav-link active" asp-controller="Vehicle" asp-action="Index"><img src="/assets/img/vehicle_nav.png" style="width:25px;" /> Kendaraan</a>
        <a class="nav-item nav-link" asp-controller="CarbonAbsorption" asp-action="Index"><img src="/assets/img/Tree_nav.png" style="width:25px;" /> Serapan Karbon</a>
    </div>
</nav>

@*kendaraan*@
<div class="tab-pane fade show active" id="nav-kendaraan" role="tabpanel" aria-labelledby="nav-kendaraan-tab">
    <div class="pt-4">
        <a class="btn btn-success mb-3" asp-controller="Vehicle" asp-action="ListVehicle"><i class="fa fa-plus"></i> Tambah</a>
        @* <a class="btn btn-success mb-3" asp-controller="Vehicle" asp-action="GalleryVehicle"><i class="fa fa-plus"></i> Gallery</a>*@
        @*<a class="btn btn-success mb-3" asp-controller="Vehicle" asp-action="Create"><i class="fa fa-plus"></i> Tambah</a>
            <a class="btn btn-success mb-3" asp-controller="Vehicle" asp-action="ListVehicle"><i class="fa fa-plus"></i> List Vehicle</a>*@
        <table class="table table-striped table-bordered" id="Vehicle">
            <thead>
                <tr>
                    <th>
                        @Html.DisplayNameFor(model => model.VehicleEmisionId)
                    </th>
                    <th>
                        @*@Html.DisplayNameFor(model => model.VehicleName)*@
                        @*Vehicle*@
                        Transportasi
                    </th>
                    <th>
                        @*@Html.DisplayNameFor(model => model.TransportationName)
                            Mode Transportasi*@
                        Jumlah Penumpang (Orang)
                    </th>
                    <th>
                        @*@Html.DisplayNameFor(model => model.TransportationName)
                            Mode Transportasi*@
                        Jarak Tempuh (KM)
                    </th>
                    <th>
                        @*@Html.DisplayNameFor(model => model.CubicalCentimeter)
                            Kapasitas*@
                        Estimasi Frekuensi / Bulan
                    </th>
                    <th>
                        @*@Html.DisplayNameFor(model => model.AmountPeople)
                            Jumlah Orang*@
                        BBM/Bulan (Liter)
                    </th>
                    <th>
                        @*@Html.DisplayNameFor(model => model.Mileage)
                            Mileages*@
                        BBM/Orang/Tahun (Liter)
                    </th>
                    <th>
                        @*@Html.DisplayNameFor(model => model.AmountPeople)
                            Jumlah Orang*@
                        Emisi/Bulan (KG CO<sup>2</sup>)
                    </th>
                    <th>
                        Tanggal
                    </th>
                    <th>Action</th>
                </tr>
            </thead>
        </table>

    </div>
</div>

@section scripts{

    <script src="https://cdn.datatables.net/fixedcolumns/4.2.1/js/dataTables.fixedColumns.min.js"></script>

    <script type="text/javascript">
        var UrlVehicle = '@Url.Action("GetListUser", "Vehicle")';
        var UrlEdit = '@Url.Action("AddorEdit", "Vehicle")';

        $(document).ready(function () {
            //$('div[id="nav-rumah"]').on('shown.bs.tab', function (e) {
            //    $.fn.dataTable.tables({ visible: true, api: true }).columns.adjust();
            //});

            $('table.table').dataTable({
                scrollX: true,
                order: [0, 'desc'],
                fixedColumns: {
                    leftColumns: 0,
                    rightColumns: 1
                },
                ajax: {
                    url: UrlVehicle,
                    type: 'GET',
                    dataType: 'json',
                    dataSrc: ''
                },
                //pageLength: 25,
                columnDefs: [
                    {
                        //DataTables warning: Requested unknown parameter '0' from the data source for row '0'
                        'defaultContent': '-',
                        'targets': '_all'
                    },
                    { 'targets': [0], 'visible': false, 'searchable': false },
                    { 'targets': [1], 'width': '180px' },
                    { 'targets': [2], 'width': '160px' },
                    { 'targets': [3], 'width': '200px' },
                    { 'targets': [4], 'width': '180px' },
                    { 'targets': [5], 'width': '200px' },
                    { 'targets': [6], 'width': '180px' },
                    { 'targets': [7], 'width': '130px' },
                    { 'targets': [8], 'width': '130px' },
                    { 'width': '142px', 'targets': [9], 'orderable': false }
                ],
                responsive: true,
                columns: [
                    //{ data: 'vehicleEmisionId' },//0
                    //{ data: 'vehicleName' },//1
                    //{ data: 'fuelName' },//2
                    //{ data: 'transportationName' },//3
                    //{ data: 'cubicalCentimeter' },//4
                    //{ data: 'amountPeople' },//6
                    //{ data: 'mileage' },//7
                    { data: 'vehicleEmisionId' },//0
                    { data: 'vehicleName' },//1
                    //{ data: 'amountPeople' },//2
                    { data: 'amountPeople' },
                    {
                        data: 'mileage',
                        render: $.fn.dataTable.render.number(',', '.', 2)
                    },//3
                    {
                        data: 'travelFrequency',
                        render: $.fn.dataTable.render.number(',', '.', 0)
                    },//4
                    {
                        data: 'bbmBulanLiter',
                        render: $.fn.dataTable.render.number(',', '.', 2)
                    },//6
                    {
                        data: 'bbmOrangTahunLiter',
                        render: $.fn.dataTable.render.number(',', '.', 2)
                    },//7
                    {
                        data: 'emisionBulan',
                        render: $.fn.dataTable.render.number(',', '.', 2)
                    },//8
                    {
                        data: 'createdDate',
                    },
                    {
                        data: 'id',
                        render: function (data, type, row, meta) {
                            if (row.vehicleEmisionId === '') {
                                return '<p> </p>'
                            }

                            else {

                                return '<a class="btn btn-light" asd="qq" style="margin-right:5px;" href="/vehicle/Edit/' + row.vehicleEmisionId + '"><i class="fa fa-pencil"></i></a>' +
                                    '<a class="btn btn-light" style="margin-right:5px;" href="/vehicle/Details/' + row.vehicleEmisionId + '" ><i class="fa fa-eye"></i></a>' +
                                    '<a class="btn btn-light" style="margin-right:5px;" onclick="Delete(' + row.vehicleEmisionId + ')" ><i class="fa fa-trash"></i></a>';
                                //5
                            }

                        }
                    },
                ],
            });

        });

        $(function () {
            var successMessage = '@TempData["SuccessMessage"]'
            if (successMessage != '')
                alertify.success(successMessage);
        });

        function Delete(id) {
            alertify.confirm('Carbon Calculator', 'Hapus data ?', function () {
                window.location.href = '@Url.Action("Delete", "Vehicle")/' + id;
            }, null)
        }
    </script>
}
